<!DOCTYPE html>
<html>
<head>
    <script src="https://d3js.org/d3.v7.min.js"></script>
  <title>test</title>
  <style>
    svg {margin: 30px 20px;}
    rect {height: 60px}
    .blue{fill: #5abae6;}
    .red{fill:#d34e4e;}
    .green{fill:#9dbb19;}
    .yellow{fill:#f7b358;}
    #week1
    {
      position: absolute;
      left: 45px;
      top: 45px;
    }
    #week2
    {
      position: absolute;
      left: 45px;
      top: 115px;
    }
    #week3
    {
      position: absolute;
      left: 45px;
      top: 185px;
    }
    #week4
    {
      position: absolute;
      left: 45px;
      top: 255px;
    }


    span {
    font-size:20px;
    color:#FFF;
    line-height: 1.8em;
    text-align: center;
    display: inline-block;
    }
    .cash {
      background: palevioletred;
      border-top-left-radius: 2em;
      border-bottom-left-radius: 2em;
    }
    .card {
      background: skyblue;
      float: right;
      border-top-right-radius: 2em;
      border-bottom-right-radius: 2em;
    }
  </style>
</head>
<body>
    <div>
        <div style="float: left; text-align:right">
            <p id = "week1">1ì£¼ì°¨</p>
            <p id = "week2">2ì£¼ì°¨</p>
            <p id = "week3">3ì£¼ì°¨</p>
            <p id = "week4">4ì£¼ì°¨</p>
        </div>
        <svg width = '500' height = '300' >
        </svg>
    </div>
    <div style="margin: 100px 10px; border: 1px solid black; padding: 3px; border-radius: 2em;">
      <span class="cash" data-val="20%">í˜„ê¸ˆ ê²°ì œðŸ’µ</span>
      <span class="card" data-val="80%">ì¹´ë“œ ê²°ì œðŸ’³</span>
    </div>

    <script>
      //ê°€ë¡œ ë°ì´í„° ìž…ë ¥ê°’: var data
      //ê°€ìž¥ í° ë°ì´í„°ë¥¼ 100%ìœ¼ë¡œ ë‚˜ë¨¸ì§€ ê·¸ëž˜í”„ê°€ ìƒëŒ€ í¬ê¸°ë¥¼ ê°€ì§
        var data = [60, 30, 50, 80];
        var color = ['red', 'green', 'blue', 'yellow'];
        
        //setAttribute('data-val', '20%'); ì—ì„œ 20%ë¥¼ ë°›ì•„ì˜¨ ë°ì´í„°ë¡œ ìˆ˜ì •
        //.cash: í˜„ê¸ˆ ê²°ì œ ë¹„ìœ¨ ( ê¸ˆì•¡ or íšŸìˆ˜ëŠ” ì •í•´ì•¼ í•¨)
        //.card: ì¹´ë“œ ê²°ì œ ë¹„ìœ¨ í•©ì€ ê¼­ 100%ê°€ ë˜ì–´ì•¼í•¨
        document.querySelector('.cash').setAttribute('data-val', '20%');
        document.querySelector('.card').setAttribute('data-val', '80%');

        //%ê°€ í•œìª½ì´ ë„ˆë¬´ ìž‘ìœ¼ë©´ ê·¸ëž˜í”„ê°€ ê¹¨ì ¸ì„œ ì´ëª¨í‹°ì½˜ í•˜ë‚˜ë¡œ ëŒ€ì²´
        const spanList = document.querySelectorAll('span');
        
        spanList.forEach((span) => {
        const dataVal = parseInt(span.getAttribute('data-val'));

        if (dataVal < 20) {
        span.textContent = 'ðŸ’°';
        }
        });

        //ê°€ë¡œ ê·¸ëž˜í”„ êµ¬í˜„
        d3.select('svg').selectAll('rect')
            .data(data).enter().append('rect')
            .attr('rx',10).attr('height',60)
            .attr('y',(d,i)=>i*70).attr('class',(d,i)=>color[i])
            .attr('width',10).transition().duration(1500)
            .attr('width',d=>(d*400)/100);

        //í˜„ê¸ˆ,ì¹´ë“œ ê·¸ëž˜í”„ êµ¬í˜„
        d3.selectAll('span').datum(function(){return this.dataset}).style('width','50%')
            .transition().duration(2000).style('width', d=>d.val)
        
    </script>

</body>
</html>
